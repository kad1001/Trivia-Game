<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <!-- css -->
    <link rel="stylesheet" href="assets/css/style.css">
    <!-- bootstrap -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/css/bootstrap.min.css" integrity="sha384-GJzZqFGwb1QTTN6wy59ffF1BuGJpLSa9DkKMp0DgiMDm4iYMj70gZWKYbI706tWS" crossorigin="anonymous">

    <!-- jQuery -->
    <script src="https://code.jquery.com/jquery.js"></script>
    <!-- javascript -->
    <script src="assets/javascript/app.js"></script>
    <!-- bootstrap js -->
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.6/umd/popper.min.js" integrity="sha384-wHAiFfRlMFy6i5SRaxvfOCifBUQy1xHdJ/yoi7FRNXMRBu5WHdZYu1hA6ZOblgut" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/js/bootstrap.min.js" integrity="sha384-B0UglyR+jN6CkvvICOB2joaf5I4l3gm9GU6Hc1og6Ls7i6U/mkkaduKaBhlAXv9k" crossorigin="anonymous"></script>
    <title>Jeopardy</title>
</head>
<body>
<h1>Welcome to Jeopardy!</h1>


<div class="container" id="quiz">

        <table class="table">
                <thead>
                    <!-- questions row -->
                  <tr id="sciRow">
                    <!-- The scope attribute specifies that this is a header for a column -->
                    <th scope="col">Science</th>
                    <th scope="col">Computers</th>
                    <th scope="col">Film</th>
                  </tr>

                </thead>
                <tbody id="questionsBody">
                    <!-- multiple choice option, tell correct answer (change font to correct question -> bold) -->
                    <!--$1000 questions  -->
                    <tr>
                    <td id="easySciQ"> 
                        <button class="button" onclick="newTrivia(scienceSubject, easy)">$1000</button>
                    </td>
                    <td id="easyCompQ"> 
                        <button class="button" onclick="newTrivia(compSubject, easy)">$1000</button>
                    </td>
                    <td id="easyEntQ"> 
                        <button class="button" onclick="newTrivia(entSubject, easy)">$1000</button></td>
                  </tr>
                  <!-- $2000 -->
                  <tr>
                        <td id="medSciQ"> 
                            <button class="button" onclick="newTrivia(scienceSubject, medium)">$2000</button>
                        </td>
                        <td id="medCompQ"> 
                            <button class="button"onclick="newTrivia(compSubject, medium)">$2000</button></td>
                        <td id="medEntQ"> 
                            <button class="button"onclick="newTrivia(entSubject, medium)">$2000</button></td>
                    </tr>
                    <!-- $3000 -->
                    <tr>
                        <td id="hardSciQ">
                                <button class="button" onclick="newTrivia(scienceSubject, hard)">$3000</button></td>
                        <td id="hardEntQ">
                            <button class="button" onclick="newTrivia(compSubject, hard)">$3000</button></td>
                        <td id="hardCompQ">
                            <button class="button" onclick="newTrivia(entSubject, hard)">$3000</button></td>
                    </tr>
                </tbody>
              </table>
</div>

<!-- <div class="container">
    <div id="results">Here is where the money sum will go</div>
</div>
<div><p><span id="time"></span></p></div> -->

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<script type="text/javascript">
 // The createRow function takes data returned by newTrivia and appends the table data to the tbody
    // var createRow = function(data) {

    // subject APIs
    //  class FinalURL {
    //      constructor(subject, difficulty) {
    //          this._subject = subject;
    //          this._difficulty = difficulty;
    //      }
    //  }
    // // on #sci1button click
    //  const easyScience = new FinalURL("");
    //  const medScience = new FinalURL("");

    // base query URL
    // var easyBaseURL = ("https://opentdb.com/api.php?amount=1&category=" + subject + "&difficulty=" + easy + "&type=multiple");
    // var medBaseURL = ("https://opentdb.com/api.php?amount=1&category=" + subject + "&difficulty=" + medium + "&type=multiple");
    // var hardBaseURL = ("https://opentdb.com/api.php?amount=1&category=" + subject + "&difficulty=" + hard + "&type=multiple");
 //   global functions ----
    //   shuffles questions
    function shuffle(array) {
        var currentIndex = array.length, temporaryValue, randomIndex;
        // While there remain elements to shuffle...
        while (0 !== currentIndex) {
            // Pick a remaining element...
            randomIndex = Math.floor(Math.random() * currentIndex);
            currentIndex -= 1;
            // And swap it with the current element.
            temporaryValue = array[currentIndex];
            array[currentIndex] = array[randomIndex];
            array[randomIndex] = temporaryValue;
        }
        return array;
    };

        // creates multiple choice button, determines whether it is checked
    function createRadioElement(name, checked) {
        var radioHtml = '<input type="radio" name="' + name + '"';
        if (checked) {
            radioHtml += 'checked="checked"';
            console.log(this)
        }
        radioHtml += '/>';

        var radioFragment = document.createElement('div');
        radioFragment.innerHTML = radioHtml;

        return radioFragment.firstChild;
    };
 
    // global vars...
    var subject;
    var difficulty;
    var queryURL = ("https://opentdb.com/api.php?amount=1&category=" + subject + difficulty + "&type=multiple");
    // difficulty APIs
    var easy = "&difficulty=easy";
    var medium = "&difficulty=medium";
    var hard = "&difficulty=hard";
    //   subject APIs
    var scienceSubject = 17;
    var compSubject = 11;
    var entSubject = 12;

    var qSpot = $("#sciRow");

    var createRow = function(data){

        var tRow = $("<tr>");
        
        // shuffling the order of answers in the answers array
        var question = (data.results[0].question);
        var incorrect_answers = (data.results[0].incorrect_answers);
        var correct_answer = (data.results[0].correct_answer);
        console.log(question)
        console.log(correct_answer);
        var arr = [incorrect_answers[0], incorrect_answers[1], incorrect_answers[2], correct_answer];
        arr = shuffle(arr);
        console.log(arr);

        $("#sciRow").text(question);

        var a1 = $("#easySciQ").text(arr[0]).append(createRadioElement());
        var a2 = $("#easyCompQ").text(arr[1]).append(createRadioElement());
        var a3 = $("#medSciQ").text(arr[2]).append(createRadioElement());
        var a4 = $("#medCompQ").text(arr[3]).append(createRadioElement());

        

        // Call .filter() on arr to find correct_answer and hold it in "correct"
        const rightAnswer = arr.filter(answers => {
        return answers == correct_answer;
        });
        console.log(rightAnswer.checked)
    };


    // The newTrivia function takes a category and difficulty, searches the omdb api for it, and then passes the data to createRow
    var newTrivia = function(subject, difficulty) {
        var queryURL = ("https://opentdb.com/api.php?amount=1&category=" + subject + difficulty + "&type=multiple");
    $.ajax({
        url: queryURL,
        method: "GET"
      }).then(function(response) {
          createRow(response);
        });
  };

        // class Button {
        //     constructor(type, value)
        //     {
        //         this.type = type;
        //         this.value = value;
        //     }
        // };
        


        // functions for passing values into other questions etc
        // class answersObj {
        //     // constructor() method accepts 2 parameters: question and arr
        //     constructor(question, arr) {
        //     // holds current question, answers
        //     this.question = question;
        //     this.arr = arr;
        //     }
        // }
        
        // var me stores an instance of my question class
        // const me = new answersObj(rightAnswer);
        // console.log(me.question)

            
        // });
    // });

</script>

</body>
<script>
//     var seconds = 15,
//         display = document.querySelector('#time');
//     startTimer(seconds, display);

// function startTimer(duration, display) {
//     var timer = duration, minutes, seconds;
//     setInterval(function () {
//         minutes = parseInt(timer / 60, 10)
//         seconds = parseInt(timer % 60, 10);

//         minutes = minutes < 10 ? "0" + minutes : minutes;
//         seconds = seconds < 10 ? "0" + seconds : seconds;

//         display.textContent = minutes + ":" + seconds;

//         if (--timer < 0) {
//             timer = duration;
//         }
//     }, 1000);

// </script>

</html>