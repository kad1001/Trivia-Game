<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <!-- css -->
    <link rel="stylesheet" href="assets/css/style.css">
    <!-- bootstrap -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/css/bootstrap.min.css" integrity="sha384-GJzZqFGwb1QTTN6wy59ffF1BuGJpLSa9DkKMp0DgiMDm4iYMj70gZWKYbI706tWS" crossorigin="anonymous">

    <!-- jQuery -->
    <script src="https://code.jquery.com/jquery.js"></script>
    <!-- javascript -->
    <script src="assets/javascript/app.js"></script>
    <!-- bootstrap js -->
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.6/umd/popper.min.js" integrity="sha384-wHAiFfRlMFy6i5SRaxvfOCifBUQy1xHdJ/yoi7FRNXMRBu5WHdZYu1hA6ZOblgut" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/js/bootstrap.min.js" integrity="sha384-B0UglyR+jN6CkvvICOB2joaf5I4l3gm9GU6Hc1og6Ls7i6U/mkkaduKaBhlAXv9k" crossorigin="anonymous"></script>
    <title>Jeopardy</title>
</head>
<body>
<h1>Welcome to Jeopardy!</h1>


<div class="container" id="quiz">

        <table class="table">
                <thead>
                    <!-- questions row -->
                  <tr id="sciRow">
                    <!-- The scope attribute specifies that this is a header for a column -->
                    <th scope="col">Science</th>
                    <th scope="col">Computers</th>
                    <th scope="col">Film</th>
                  </tr>

                </thead>
                <tbody id="questionsBody">
                    <!-- multiple choice option, tell correct answer (change font to correct question -> bold) -->
                    <!--$1000 questions  -->
                    <tr>
                    <td id="easySciQ"> 
                        <button class="button" onclick="newTrivia(scienceSubject, easy)">$1000</button>
                    </td>
                    <td id="easyCompQ"> 
                        <button class="button" onclick="newTrivia(compSubject, easy)">$1000</button>
                    </td>
                    <td id="easyEntQ"> 
                        <button class="button" onclick="newTrivia(entSubject, easy)">$1000</button></td>
                  </tr>
                  <!-- $2000 -->
                  <tr>
                        <td id="medSciQ"> 
                            <button class="button" onclick="newTrivia(scienceSubject, medium)">$2000</button>
                        </td>
                        <td id="medCompQ"> 
                            <button class="button"onclick="newTrivia(compSubject, medium)">$2000</button></td>
                        <td id="medEntQ"> 
                            <button class="button"onclick="newTrivia(entSubject, medium)">$2000</button></td>
                    </tr>
                    <!-- $3000 -->
                    <tr>
                        <td id="hardSciQ">
                                <button class="button" onclick="newTrivia(scienceSubject, hard)">$3000</button></td>
                        <td id="hardEntQ">
                            <button class="button" onclick="newTrivia(compSubject, hard)">$3000</button></td>
                        <td id="hardCompQ">
                            <button class="button" onclick="newTrivia(entSubject, hard)">$3000</button></td>
                    </tr>
                </tbody>
              </table>
</div>

<div class="container">
    <h4>Money:</h4>
    <p id="moneyDisplay"></p>
</div> 
<div><p><span id="time"></span></p></div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<script type="text/javascript">

//   global functions ----
    //   shuffles questions
    "use strict";
    function shuffle(array) {
        var currentIndex = array.length, temporaryValue, randomIndex;
        // While there remain elements to shuffle...
        while (0 !== currentIndex) {
            // Pick a remaining element...
            randomIndex = Math.floor(Math.random() * currentIndex);
            currentIndex -= 1;
            // And swap it with the current element.
            temporaryValue = array[currentIndex];
            array[currentIndex] = array[randomIndex];
            array[randomIndex] = temporaryValue;
        }
        return array;
    };

        // creates multiple choice button, determines whether it is checked
    "use strict";
    function createRadioElement(name, id, checked) {
        var radioHtml = '<input type="radio" name="' + name + '" id="' + id + '" />';
        // if (checked) {
        //     radioHtml += 'checked="checked"';
        //     return checked;
        // }
        // radioHtml += '/>';

        var radioFragment = document.createElement('div');
        radioFragment.innerHTML = radioHtml;
        return radioFragment.firstChild;
        // document.getElementById("a1").addEventListener("click", function (){
        //     console.log("hello!")
        // });

    };

    "use strict";
    function createButton(id, value){
        var submitHtml = '<input type="button" id="' + id + '" value="Submit"';
        submitHtml += '/>';

        var buttonFragment = document.createElement('div');
        buttonFragment.innerHTML = submitHtml;

        return buttonFragment.firstElementChild;
    };
    
    "use strict";
    function startTimer(duration, display) {
    var timer = duration, minutes, seconds;
    setInterval(function () {
        minutes = parseInt(timer / 60, 10)
        seconds = parseInt(timer % 60, 10);

        minutes = minutes < 10 ? "0" + minutes : minutes;
        seconds = seconds < 10 ? "0" + seconds : seconds;

        display.textContent = minutes + ":" + seconds;

        if (--timer < 0) {
            timer = duration;
            alert("time's up!")
        }
    }, 1000);

};


    // global vars...
    var money = 0;

    var subject;
    var difficulty;
    var queryURL = ("https://opentdb.com/api.php?amount=1&category=" + subject + difficulty + "&type=multiple");
    // difficulty APIs
    var easy = "&difficulty=easy";
    var medium = "&difficulty=medium";
    var hard = "&difficulty=hard";
    //   subject APIs
    var scienceSubject = 17;
    var compSubject = 11;
    var entSubject = 12;

    // DOM vars
    var qSpot = $("#sciRow");

    "use strict";
    var createRow = function(data){
        var tRow = $("<tr>");
        // shuffling the order of answers in the answers array
        var question = (data.results[0].question);
        var incorrect_answers = (data.results[0].incorrect_answers);
        var correct_answer = (data.results[0].correct_answer);
        console.log(question)
        console.log(correct_answer);
        var arr = [incorrect_answers[0], incorrect_answers[1], incorrect_answers[2], correct_answer];
        arr = shuffle(arr);
        console.log(arr);
        $("#sciRow").text(question);


        $("#easySciQ").text(arr[0]).addClass("displayedChoice");

        $("#easyCompQ").text(arr[1]).append(createRadioElement("name2", "id2", false));
        $("#medSciQ").text(arr[2]).append(createRadioElement("name3", "id3", false));
        $("#medCompQ").text(arr[3]);
        // .append(createRadioElement("name4", "id4", false));

        ("displayedChoice")
        // create radio element for each answer in arr
        // for (let x = 0; x < arr.length; x++){
        // appendChild(createRadioElement())
        // }
        
        // .append(createRadioElement());
    
        var moneyDisplay = $("#moneyDisplay").text(money);



    
        // Call .filter() on arr to find correct_answer and hold it in "rightAnswer"
        const rightAnswer = arr.filter(answers => {
        return answers == correct_answer;
        });

        console.log(rightAnswer)

        // after submit
        // call .filter() on guesses and hold it in "correctGuess"
        

        $("#hardEntQ").replaceWith(createButton("submit", "hi"));


        "use strict";
        $("#submit").click(function (radio1, radio2, radio3, radio4){
            console.log(this)

    // switch statement: evaluates the expression (rightAnswer is checked)
    // find rightAnswer button, if it is checked after submit button is clicked, proceed with this..

    // switch (expression) {
    //     case true:
        //  money++, break
        // case false: money--, break

    // }
        });


        // display = document.querySelector("#hardSciQ");
        // // runs timer for 10 seconds
        // startTimer(10, display);
        // detetermines which radio button is clicked


        // switch (createRadioElement.checked) {
        //     case a1:
        //     console.log("hey")
        //     break;

        // }
            
    };


    // The newTrivia function takes a category and difficulty, searches the omdb api for it, and then passes the data to createRow
    "use strict";
    var newTrivia = function(subject, difficulty) {
        var queryURL = ("https://opentdb.com/api.php?amount=1&category=" + subject + difficulty + "&type=multiple");
    $.ajax({
        url: queryURL,
        method: "GET"
      }).then(function(response) {
          createRow(response);
        });
  };

//   "use strict";
//   $(document).ready(function(){});


</script>

</body>
</html>